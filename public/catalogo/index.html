<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todogram - Catálogo</title>
    <!-- Metatags globales para compartir (catalogo) -->
    <meta property="og:site_name" content="Todogram" />
    <meta property="og:type" content="website" />
    <meta property="og:title" id="og-title" content="Todogram - Catálogo" />
    <meta property="og:description" id="og-description" content="Explora el catálogo completo de películas y series en Todogram." />
    <meta property="og:image" id="og-image" content="https://jfl4bur.github.io/Todogram/images/logo_r.png" />
    <meta property="og:url" id="og-url" content="https://jfl4bur.github.io/Todogram/public/catalogo/" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" id="twitter-title" content="Todogram - Catálogo" />
    <meta name="twitter:description" id="twitter-description" content="Explora el catálogo completo de películas y series en Todogram." />
    <meta name="twitter:image" id="twitter-image" content="https://jfl4bur.github.io/Todogram/images/logo_r.png" />
    <script>
        window.updateGlobalShareMeta = function(item) {
            try {
                if (!item) return;
                const title = item.title || 'Todogram - Catálogo';
                const description = (item.description || item.synopsis || 'Explora el catálogo completo de películas y series en Todogram.').slice(0, 180);
                const image = item.posterUrl || 'https://jfl4bur.github.io/Todogram/images/logo_r.png';
                const url = window.location.href.split('#')[0];
                const set = (id, val) => { const el = document.getElementById(id); if (el) el.setAttribute('content', val); };
                set('og-title', title);
                set('og-description', description);
                set('og-image', image);
                set('og-url', url);
                set('twitter-title', title);
                set('twitter-description', description);
                set('twitter-image', image);
                console.log('[Catalogo] Metatags actualizados', {title, description, image, url});
            } catch(e){ console.warn('Catalogo updateGlobalShareMeta fallo', e); }
        };
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://jfl4bur.github.io/Todogram/public/css/styles.css">
</head>
<body>
    <div id="header-root" style="margin-top: 75px;"></div>

    <main id="catalogo-page-root" class="site-main">
        <!-- Catalog page shell will be injected by catalogo.js initPage -->
    </main>

    <div id="footer-root"></div>

    <!-- Div helper para iOS (usado por DetailsModal para forzar reflow en iOS) -->
    <div id="ios-helper" class="ios-helper" style="display:none;"></div>

    <!-- Copia de los modales necesarios (hover, details, video, share) para la página de catálogo -->
    <div class="modal-overlay" id="modal-overlay" style="display:none;">
        <div class="modal-content" id="modal-content">
            <div class="modal-header">
                <img class="modal-backdrop" id="modal-backdrop" src="" alt="">
            </div>
            <div class="modal-body" id="modal-body"></div>
        </div>
    </div>

    <div class="details-modal-overlay" id="details-modal-overlay" style="display:none;">
        <div class="details-modal-content" id="details-modal-content">
            <button class="details-modal-close" id="details-modal-close">&times;</button>
            <div class="details-modal-header">
                <img class="details-modal-backdrop" id="details-modal-backdrop" src="" alt="">
            </div>
            <div class="details-modal-body" id="details-modal-body"></div>
        </div>
    </div>

    <div class="video-modal-overlay" id="video-modal-overlay" style="display:none;">
        <div class="video-modal-content">
            <button class="video-modal-close" id="video-modal-close">&times;</button>
            <iframe class="video-iframe" id="video-iframe" allowfullscreen></iframe>
        </div>
    </div>

    <div class="gallery-image-modal" id="gallery-image-modal" style="display:none;">
        <button class="gallery-image-modal-close" id="gallery-image-modal-close">&times;</button>
        <div class="gallery-image-modal-nav">
            <button class="gallery-image-modal-nav-btn" id="gallery-image-modal-prev"><i class="fas fa-chevron-left"></i></button>
            <button class="gallery-image-modal-nav-btn" id="gallery-image-modal-next"><i class="fas fa-chevron-right"></i></button>
        </div>
        <div class="gallery-image-modal-content">
            <img class="gallery-image-modal-img" id="gallery-image-modal-img" src="" alt="">
        </div>
    </div>

    <div class="share-modal-overlay" id="share-modal-overlay" style="display:none;">
        <div class="share-modal-content" id="share-modal-content">
            <button class="share-modal-close" id="share-modal-close">&times;</button>
            <h3 class="share-modal-title">Compartir película</h3>
            <div class="share-preview" id="share-preview">
                <img class="share-preview-image" id="share-preview-image" src="" alt="Portada">
                <div class="share-preview-content">
                    <h4 class="share-preview-title" id="share-preview-title"></h4>
                    <p class="share-preview-description" id="share-preview-description"></p>
                </div>
            </div>
            <div class="share-options">
                <div class="share-option" id="share-facebook">
                    <div class="share-icon facebook">
                        <i class="fab fa-facebook-f"></i>
                    </div>
                    <span class="share-option-text">Facebook</span>
                </div>
                
                <div class="share-option" id="share-twitter">
                    <div class="share-icon twitter">
                        <i class="fab fa-twitter"></i>
                    </div>
                    <span class="share-option-text">Twitter</span>
                </div>
                
                <div class="share-option" id="share-whatsapp">
                    <div class="share-icon whatsapp">
                        <i class="fab fa-whatsapp"></i>
                    </div>
                    <span class="share-option-text">WhatsApp</span>
                </div>
                
                <div class="share-option" id="share-telegram">
                    <div class="share-icon telegram">
                        <i class="fab fa-telegram-plane"></i>
                    </div>
                    <span class="share-option-text">Telegram</span>
                </div>
                
                <div class="share-option" id="share-link">
                    <div class="share-icon link">
                        <i class="fas fa-link"></i>
                    </div>
                    <span class="share-option-text">Copiar enlace</span>
                </div>
            </div>
            
            <div class="share-link-container">
                <input type="text" class="share-link-input" id="share-link-input" readonly>
                <button class="share-link-button" id="share-link-button">Copiar</button>
            </div>
        </div>
    </div>

    <script>
        const DATA_URL = "https://jfl4bur.github.io/Todogram/public/data.json";
        window.peliculas = [];
    </script>
    <!-- slider-independent.js and carousel.js are intentionally omitted here to avoid double initialization and reduce load.
        The catalog page uses a grid rendered by catalogo.js. If you need carousel features, load these scripts conditionally. -->
    <script src="https://jfl4bur.github.io/Todogram/public/js/hover-modal.js"></script>
    <script src="https://jfl4bur.github.io/Todogram/public/js/details-modal.js"></script>
    <script src="https://jfl4bur.github.io/Todogram/public/js/video-modal.js"></script>
    <script src="https://jfl4bur.github.io/Todogram/public/js/share-modal.js"></script>
    <script src="https://jfl4bur.github.io/Todogram/public/js/header.js"></script>
    <script src="https://jfl4bur.github.io/Todogram/public/js/catalogo.js"></script>
    <script src="https://jfl4bur.github.io/Todogram/public/js/footer.js"></script>
</body>
</html>