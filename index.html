<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todogram - Series y Películas</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://jfl4bur.github.io/Todogram/public/css/styles.css">
    
    <!-- Metatags dinámicos para compartir -->
    <div id="dynamic-meta-tags" style="display:none;">
        <meta property="og:title" id="og-title" content="">
        <meta property="og:description" id="og-description" content="">
        <meta property="og:image" id="og-image" content="">
        <meta property="og:url" id="og-url" content="">
        <meta property="og:type" content="website">
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" id="twitter-title" content="">
        <meta name="twitter:description" id="twitter-description" content="">
        <meta name="twitter:image" id="twitter-image" content="">
    </div>

</head>
<body>
    <div id="header-root"></div>
    
    <!-- ESQUELETO DEL SLIDER (se muestra antes de que se cargue el slider real) -->
    <div class="slider-section" id="slider-skeleton">
        <h2 class="slider-title">Destacadas</h2>
        <div class="slider-container">
            <div class="slider-wrapper" id="slider-skeleton-wrapper">
                <!-- Slides skeleton -->
                <div class="slider-slide skeleton-slide">
                    <div class="slider-img-wrapper">
                        <div class="skeleton-placeholder"></div>
                    </div>
                    <div class="slider-overlay">
                        <div class="slider-title-movie skeleton-text"></div>
                        <div class="slider-meta">
                            <span class="skeleton-text-small"></span>
                            <span class="skeleton-text-small"></span>
                            <span class="skeleton-text-small"></span>
                        </div>
                        <div class="slider-description skeleton-text-medium"></div>
                    </div>
                </div>
                <div class="slider-slide skeleton-slide">
                    <div class="slider-img-wrapper">
                        <div class="skeleton-placeholder"></div>
                    </div>
                    <div class="slider-overlay">
                        <div class="slider-title-movie skeleton-text"></div>
                        <div class="slider-meta">
                            <span class="skeleton-text-small"></span>
                            <span class="skeleton-text-small"></span>
                            <span class="skeleton-text-small"></span>
                        </div>
                        <div class="slider-description skeleton-text-medium"></div>
                    </div>
                </div>
                <div class="slider-slide skeleton-slide">
                    <div class="slider-img-wrapper">
                        <div class="skeleton-placeholder"></div>
                    </div>
                    <div class="slider-overlay">
                        <div class="slider-title-movie skeleton-text"></div>
                        <div class="slider-meta">
                            <span class="skeleton-text-small"></span>
                            <span class="skeleton-text-small"></span>
                            <span class="skeleton-text-small"></span>
                        </div>
                        <div class="slider-description skeleton-text-medium"></div>
                    </div>
                </div>
                <div class="slider-slide skeleton-slide">
                    <div class="slider-img-wrapper">
                        <div class="skeleton-placeholder"></div>
                    </div>
                    <div class="slider-overlay">
                        <div class="slider-title-movie skeleton-text"></div>
                        <div class="slider-meta">
                            <span class="skeleton-text-small"></span>
                            <span class="skeleton-text-small"></span>
                            <span class="skeleton-text-small"></span>
                        </div>
                        <div class="slider-description skeleton-text-medium"></div>
                    </div>
                </div>
                <div class="slider-slide skeleton-slide">
                    <div class="slider-img-wrapper">
                        <div class="skeleton-placeholder"></div>
                    </div>
                    <div class="slider-overlay">
                        <div class="slider-title-movie skeleton-text"></div>
                        <div class="slider-meta">
                            <span class="skeleton-text-small"></span>
                            <span class="skeleton-text-small"></span>
                            <span class="skeleton-text-small"></span>
                        </div>
                        <div class="slider-description skeleton-text-medium"></div>
                    </div>
                </div>
                <div class="slider-slide skeleton-slide">
                    <div class="slider-img-wrapper">
                        <div class="skeleton-placeholder"></div>
                    </div>
                    <div class="slider-overlay">
                        <div class="slider-title-movie skeleton-text"></div>
                        <div class="slider-meta">
                            <span class="skeleton-text-small"></span>
                            <span class="skeleton-text-small"></span>
                            <span class="skeleton-text-small"></span>
                        </div>
                        <div class="slider-description skeleton-text-medium"></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="slider-nav">
            <button class="slider-nav-btn prev skeleton-btn"><i class="fas fa-chevron-left"></i></button>
            <button class="slider-nav-btn next skeleton-btn"><i class="fas fa-chevron-right"></i></button>
        </div>
    </div>
    <div class="slider-pagination" id="slider-skeleton-pagination">
        <button class="slider-pagination-dot skeleton-dot active"></button>
        <button class="slider-pagination-dot skeleton-dot"></button>
        <button class="slider-pagination-dot skeleton-dot"></button>
        <button class="slider-pagination-dot skeleton-dot"></button>
        <button class="slider-pagination-dot skeleton-dot"></button>
        <button class="slider-pagination-dot skeleton-dot"></button>
    </div>
    
    <!-- SLIDER CAROUSEL TIPO RAKUTEN.TV -->
    <div class="slider-section" id="slider-real" style="display: none;">
        <h2 class="slider-title"></h2>
        <div class="slider-container">
            <div class="slider-wrapper" id="slider-wrapper">
                <!-- Slides se insertarán aquí -->
            </div>
        </div>
        <div class="slider-nav">
            <button class="slider-nav-btn prev" id="slider-prev"><i class="fas fa-chevron-left"></i></button>
            <button class="slider-nav-btn next" id="slider-next"><i class="fas fa-chevron-right"></i></button>
        </div>
    </div>
    <div class="slider-pagination" id="slider-pagination"></div>
    <!-- Div helper para iOS -->
    <div id="ios-helper" class="ios-helper" style="display:none;"></div>

    <!-- Carrusel -->
    <div class="carousel-section">
        <h1 class="carousel-title">Películas</h1>
        <div class="carousel-container">
            <div class="carousel-skeleton" id="carousel-skeleton">
                <div class="skeleton-item"><div class="skeleton-spinner"></div></div>
                <div class="skeleton-item"><div class="skeleton-spinner"></div></div>
                <div class="skeleton-item"><div class="skeleton-spinner"></div></div>
                <div class="skeleton-item"><div class="skeleton-spinner"></div></div>
                <div class="skeleton-item"><div class="skeleton-spinner"></div></div>
                <div class="skeleton-item"><div class="skeleton-spinner"></div></div>
                <div class="skeleton-item"><div class="skeleton-spinner"></div></div>
                <div class="skeleton-item"><div class="skeleton-spinner"></div></div>
                <div class="skeleton-item"><div class="skeleton-spinner"></div></div>
                <div class="skeleton-item"><div class="skeleton-spinner"></div></div>
                <div class="skeleton-item"><div class="skeleton-spinner"></div></div>
                <div class="skeleton-item"><div class="skeleton-spinner"></div></div>
            </div>
            <div id="carousel-wrapper" style="display:none;"></div>
            <div class="carousel-progress">
                <div class="carousel-progress-bar"></div>
            </div>
            <div class="carousel-nav" id="carousel-nav">
                <button class="carousel-nav-btn prev" id="carousel-prev"><i class="fas fa-chevron-left"></i></button>
                <button class="carousel-nav-btn next" id="carousel-next"><i class="fas fa-chevron-right"></i></button>
            </div>
        </div>
    </div>

    <!-- Modales -->
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal-content" id="modal-content">
            <div class="modal-header">
                <img class="modal-backdrop" id="modal-backdrop" src="" alt="">
            </div>
            <div class="modal-body" id="modal-body"></div>
        </div>
    </div>

    <div class="details-modal-overlay" id="details-modal-overlay">
        <div class="details-modal-content" id="details-modal-content">
            <button class="details-modal-close" id="details-modal-close">&times;</button>
            <div class="details-modal-header">
                <img class="details-modal-backdrop" id="details-modal-backdrop" src="" alt="">
            </div>
            <div class="details-modal-body" id="details-modal-body"></div>
        </div>
    </div>

    <div class="video-modal-overlay" id="video-modal-overlay">
        <div class="video-modal-content">
            <button class="video-modal-close" id="video-modal-close">&times;</button>
            <iframe class="video-iframe" id="video-iframe" allowfullscreen></iframe>
        </div>
    </div>

    <div class="gallery-image-modal" id="gallery-image-modal">
        <button class="gallery-image-modal-close" id="gallery-image-modal-close">&times;</button>
        <div class="gallery-image-modal-nav">
            <button class="gallery-image-modal-nav-btn" id="gallery-image-modal-prev"><i class="fas fa-chevron-left"></i></button>
            <button class="gallery-image-modal-nav-btn" id="gallery-image-modal-next"><i class="fas fa-chevron-right"></i></button>
        </div>
        <div class="gallery-image-modal-content">
            <img class="gallery-image-modal-img" id="gallery-image-modal-img" src="" alt="">
        </div>
    </div>

    <!-- Modal para compartir -->
    <div class="share-modal-overlay" id="share-modal-overlay">
        <div class="share-modal-content" id="share-modal-content">
            <button class="share-modal-close" id="share-modal-close">&times;</button>
            <h3 class="share-modal-title">Compartir película</h3>
            
            <div class="share-preview" id="share-preview">
                <img class="share-preview-image" id="share-preview-image" src="" alt="Portada">
                <div class="share-preview-content">
                    <h4 class="share-preview-title" id="share-preview-title"></h4>
                    <p class="share-preview-description" id="share-preview-description"></p>
                </div>
            </div>
            
            <div class="share-options">
                <div class="share-option" id="share-facebook">
                    <div class="share-icon facebook">
                        <i class="fab fa-facebook-f"></i>
                    </div>
                    <span class="share-option-text">Facebook</span>
                </div>
                
                <div class="share-option" id="share-twitter">
                    <div class="share-icon twitter">
                        <i class="fab fa-twitter"></i>
                    </div>
                    <span class="share-option-text">Twitter</span>
                </div>
                
                <div class="share-option" id="share-whatsapp">
                    <div class="share-icon whatsapp">
                        <i class="fab fa-whatsapp"></i>
                    </div>
                    <span class="share-option-text">WhatsApp</span>
                </div>
                
                <div class="share-option" id="share-telegram">
                    <div class="share-icon telegram">
                        <i class="fab fa-telegram-plane"></i>
                    </div>
                    <span class="share-option-text">Telegram</span>
                </div>
                
                <div class="share-option" id="share-link">
                    <div class="share-icon link">
                        <i class="fas fa-link"></i>
                    </div>
                    <span class="share-option-text">Copiar enlace</span>
                </div>
            </div>
            
            <div class="share-link-container">
                <input type="text" class="share-link-input" id="share-link-input" readonly>
                <button class="share-link-button" id="share-link-button">Copiar</button>
            </div>
        </div>
    </div>
    <script>
        // URL del archivo JSON en GitHub Pages
        const DATA_URL = "https://jfl4bur.github.io/Todogram/public/data.json";
        window.peliculas = []; // Se llenará con los datos cargados
    </script>
    <script src="https://jfl4bur.github.io/Todogram/public/js/slider-independent.js"></script>
    <script src="https://jfl4bur.github.io/Todogram/public/js/carousel.js"></script>
    <script src="https://jfl4bur.github.io/Todogram/public/js/hover-modal.js"></script>
    <script src="https://jfl4bur.github.io/Todogram/public/js/details-modal.js"></script>
    <script src="https://jfl4bur.github.io/Todogram/public/js/video-modal.js"></script>
    <script src="https://jfl4bur.github.io/Todogram/public/js/share-modal.js"></script>
    <script src="https://jfl4bur.github.io/Todogram/public/js/header.js"></script>
    <script src="https://jfl4bur.github.io/Todogram/public/js/main.js"></script>
    
    <!-- Script para asegurar la inicialización del slider independiente -->
    <script>
        // El slider independiente se inicializa automáticamente sin depender del carousel
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Index: DOM cargado, slider independiente se inicializará automáticamente...');
            
            // Verificar que el slider independiente esté disponible
            setTimeout(() => {
                if (window.sliderIndependent) {
                    console.log('Index: Slider independiente disponible');
                    
                    // Configurar transición del esqueleto
                    const skeletonSection = document.getElementById('slider-skeleton');
                    const realSection = document.getElementById('slider-real');
                    
                    if (skeletonSection && realSection) {
                        // Asegurar que el esqueleto esté visible inicialmente
                        skeletonSection.style.display = 'block';
                        skeletonSection.style.opacity = '1';
                        realSection.style.display = 'none';
                        
                        console.log('Index: Esqueleto del slider configurado correctamente');
                    }
                } else {
                    console.error('Index: Slider independiente no disponible');
                }
            }, 1000);
        });
        
        // Función para manejar la transición del esqueleto
        function handleSkeletonTransition() {
            const skeletonSection = document.getElementById('slider-skeleton');
            const skeletonPagination = document.getElementById('slider-skeleton-pagination');
            const realSection = document.getElementById('slider-real');
            const realPagination = document.getElementById('slider-pagination');
            
            if (skeletonSection && realSection) {
                // Fade out del esqueleto
                skeletonSection.style.transition = 'opacity 0.8s ease-out';
                skeletonSection.style.opacity = '0';
                
                if (skeletonPagination) {
                    skeletonPagination.style.transition = 'opacity 0.8s ease-out';
                    skeletonPagination.style.opacity = '0';
                }
                
                // Mostrar slider real después del fade out
                setTimeout(() => {
                    skeletonSection.style.display = 'none';
                    if (skeletonPagination) {
                        skeletonPagination.style.display = 'none';
                    }
                    
                    realSection.style.display = 'block';
                    realSection.style.opacity = '0';
                    realSection.style.transition = 'opacity 0.8s ease-in';
                    
                    if (realPagination) {
                        realPagination.style.opacity = '0';
                        realPagination.style.transition = 'opacity 0.8s ease-in';
                    }
                    
                    // Fade in del slider real
                    setTimeout(() => {
                        realSection.style.opacity = '1';
                        if (realPagination) {
                            realPagination.style.opacity = '1';
                        }
                    }, 100);
                    
                }, 800);
            }
        }
        
        // Exponer la función globalmente para que el slider la pueda usar
        window.handleSkeletonTransition = handleSkeletonTransition;
    </script>
</body>
</html>